---
import Layout from '../layouts/Layout.astro';
import { ArrowRight, Calendar, Clock, Mail } from 'lucide-astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).map(post => ({
    title: post.data.title,
    excerpt: post.data.description,
    date: post.data.pubDate.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
    }),
    readingTime: "5 min", // Could be calculated
    category: post.data.category,
    slug: post.slug
}));
---

<Layout title="Luis Garcia | Blog">
	<div class="container">
		<!-- Hero Section -->
		<div class="mb-24 text-center">
			<span class="inline-block px-3 py-1 text-[10px] font-black tracking-[0.2em] text-primary uppercase bg-primary/10 border border-primary/20 rounded-full mb-6">
				Insights & Articles
			</span>
			<h1 class="text-5xl md:text-7xl font-black mb-8 leading-none tracking-tighter">
				Tech <span class="text-gradient">Explorations</span>
			</h1>
			<p class="text-xl text-fg-muted max-w-2xl mx-auto leading-relaxed">
				Sharing my journey through software engineering, cloud architecture, and modern web development.
			</p>
		</div>

		<!-- Posts Grid -->
		<div class="flex flex-col gap-8">
			{posts.map(post => (
				<article class="group card relative overflow-hidden flex flex-col md:flex-row gap-8">
					<!-- Visual Accent -->
					<div class="absolute top-0 left-0 w-1 h-full bg-primary/20 group-hover:bg-primary transition-all duration-500"></div>
					
					<div class="flex-1">
						<div class="flex items-center gap-4 mb-4">
							<span class="px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest bg-primary/5 text-primary border border-primary/10">
								{post.category}
							</span>
							<div class="flex items-center gap-2 text-xs text-fg-muted font-bold uppercase tracking-wider">
								<Calendar class="w-3 h-3" />
								{post.date}
							</div>
						</div>
						
						<a href={`/blog/${post.slug}`} class="block mb-4">
							<h2 class="text-2xl md:text-3xl font-black group-hover:text-primary transition-colors leading-tight">
								{post.title}
							</h2>
						</a>
						
						<p class="text-fg-muted leading-relaxed mb-6">
							{post.excerpt}
						</p>
						
						<div class="flex items-center justify-between">
							<div class="flex items-center gap-2 text-xs text-fg-muted font-bold opacity-60">
								<Clock class="w-3 h-3" />
								{post.readingTime} read
							</div>
							
							<a href={`/blog/${post.slug}`} class="flex items-center gap-2 text-sm font-black text-primary group/link">
								Read Full Article
								<ArrowRight class="w-4 h-4 group-hover/link:translate-x-1 transition-transform" />
							</a>
						</div>
					</div>
				</article>
			))}
		</div>

		<!-- Newsletter / Contact CTA -->
		<div class="mt-24 p-12 rounded-[3.5rem] glass text-center relative overflow-hidden">
			<div class="absolute -top-24 -right-24 w-64 h-64 bg-primary opacity-20 blur-3xl"></div>
			<div class="relative z-10">
				<h3 class="text-3xl font-black mb-4">Want to hear more?</h3>
				<p class="text-fg-muted mb-8 max-w-md mx-auto">Get in touch if you're interested in collaborating or just want to discuss tech.</p>
				<a href="mailto:ludevgarcialouis@gmail.com" class="inline-flex items-center gap-3 px-8 py-4 bg-primary text-white font-black rounded-2xl hover:shadow-xl hover:shadow-primary/20 transition-all">
					Say Hello
					<Mail class="w-5 h-5" />
				</a>
			</div>
		</div>
	</div>
</Layout>
