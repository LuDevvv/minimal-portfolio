---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { Calendar, Clock, ChevronLeft } from "lucide-astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: post,
    }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
    <div class="container max-w-3xl">
        <a
            href="/"
            class="inline-flex items-center gap-2 text-sm font-bold text-fg-muted hover:text-primary transition-colors mb-12 group"
        >
            <ChevronLeft
                class="w-4 h-4 group-hover:-translate-x-1 transition-transform"
            />
            Back to Blog
        </a>

        <article>
            <div class="mb-12">
                <div class="flex items-center gap-4 mb-6">
                    <span
                        class="px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest bg-primary/5 text-primary border border-primary/10"
                    >
                        {post.data.category}
                    </span>
                    <div
                        class="flex items-center gap-2 text-xs text-fg-muted font-bold uppercase tracking-wider"
                    >
                        <Calendar class="w-3 h-3" />
                        {
                            post.data.pubDate.toLocaleDateString("en-US", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </div>
                </div>

                <h1
                    class="text-4xl md:text-6xl font-black mb-8 leading-tight tracking-tighter"
                >
                    {post.data.title}
                </h1>

                <p
                    class="text-xl text-fg-muted leading-relaxed italic border-l-4 border-primary/20 pl-6"
                >
                    {post.data.description}
                </p>
            </div>

            {
                post.data.heroImage && (
                    <img
                        src={post.data.heroImage}
                        alt=""
                        class="w-full aspect-video object-cover rounded-[3rem] border border-border mb-16"
                    />
                )
            }

            <div class="prose prose-invert prose-lg max-w-none">
                <Content />
            </div>
        </article>

        <div class="mt-24 pt-12 border-t border-border">
            <div class="flex items-center justify-between">
                <p class="text-sm text-fg-muted font-medium">
                    Thanks for reading!
                </p>
                <div class="flex gap-4">
                    <button
                        class="text-sm font-black text-primary hover:underline"
                        >Share on X</button
                    >
                    <button
                        class="text-sm font-black text-primary hover:underline"
                        >Share on LinkedIn</button
                    >
                </div>
            </div>
        </div>
    </div>
</Layout>
