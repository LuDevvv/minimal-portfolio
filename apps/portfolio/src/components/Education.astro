---
import { getLangFromUrl, useTranslations } from "../i18n/ui";
import { Award, BookOpen, GraduationCap, Cloud, Cpu, ArrowUpRight } from "lucide-astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const certifications = [
  {
    title: lang === "es" ? "Curso de Testing" : "Testing Course",
    issuer: "Mente Tester",
    date: "2025",
    image: "/assets/certificates/testing-certification.jpg", 
    link: "#",
  }
];

const studies = [
  {
    title: lang === "es" ? "Cloud & DevOps" : "Cloud & DevOps",
    institution: "Indotel / Cymetria",
    description: lang === "es" 
      ? "Profundizando en AWS, Docker, Kubernetes y CI/CD pipelines."
      : "Deep diving into AWS, Docker, Kubernetes, and CI/CD pipelines.",
    icon: Cloud,
    progress: 75
  },
  {
    title: lang === "es" ? "IA y Automatización" : "AI & Automation",
    institution: "n8n / AI Engineering",
    description: lang === "es" 
      ? "Creación de agentes autónomos, flujos de trabajo con n8n y LLMs."
      : "Building autonomous agents, n8n workflows, and LLM integrations.",
    icon: Cpu,
    progress: 60
  }
];
---

<section id="education" class="py-24 px-6 bg-surface-lighter/50 relative overflow-hidden reveal">
  <div class="container mx-auto max-w-6xl">
    
    <!-- Section Header -->
    <div class="mb-20 text-center md:text-left">
      <span class="inline-block px-3 py-1 text-[10px] font-black tracking-[0.2em] text-primary uppercase bg-primary/10 border border-primary/20 rounded-full mb-6">
         {t("education.badge")}
      </span>
      <h2 class="text-3xl md:text-5xl font-black mb-6 text-fg tracking-tighter">
         {t("education.title")}
      </h2>
      <p class="text-xl text-fg-muted leading-relaxed max-w-2xl mx-auto md:mx-0">
         {t("education.description")}
      </p>
    </div>

    <div class="grid lg:grid-cols-2 gap-12 lg:gap-20">
      
      <!-- Certifications Column -->
      <div class="space-y-8">
        <h3 class="text-2xl font-bold flex items-center gap-3 text-fg">
          <Award class="w-6 h-6 text-primary" />
          {t("education.certification")}
        </h3>
        
        <div class="grid gap-6">
          {certifications.map(cert => (
            <div class="group relative bg-canvas rounded-3xl overflow-hidden border border-border hover:border-primary/50 transition-all duration-500 hover:shadow-xl hover:shadow-primary/5">
              <div class="aspect-[4/3] overflow-hidden bg-surface-lighter relative">
                 {/* Placeholder for the image */}
                 <div class="absolute inset-0 flex items-center justify-center text-fg-muted/20">
                    <Award class="w-16 h-16" />
                 </div>
                 <img 
                   src={cert.image} 
                   alt={cert.title}
                   class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 relative z-10"
                   onerror="this.style.display='none'"
                 />
              </div>
              <div class="p-6">
                <h4 class="text-xl font-bold text-fg mb-1 group-hover:text-primary transition-colors">{cert.title}</h4>
                <p class="text-sm font-bold text-fg-muted uppercase tracking-wider">{cert.issuer}</p>
                <div class="flex justify-between items-center mt-4">
                    <span class="text-xs font-mono px-2 py-1 bg-surface rounded text-fg-muted">{cert.date}</span>
                    <a href={cert.link} class="text-primary hover:text-primary/80 transition-colors">
                        <ArrowUpRight class="w-5 h-5" />
                    </a>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Ongoing Studies Column -->
      <div class="space-y-8">
        <h3 class="text-2xl font-bold flex items-center gap-3 text-fg">
          <BookOpen class="w-6 h-6 text-primary" />
          {t("education.studies")}
        </h3>

        <div class="space-y-6">
          {studies.map(study => (
            <div class="bg-canvas p-6 rounded-3xl border border-border hover:border-primary/30 transition-all duration-300">
              <div class="flex items-start gap-4 mb-4">
                <div class="w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary shrink-0">
                  <study.icon class="w-6 h-6" />
                </div>
                <div>
                  <h4 class="text-lg font-bold text-fg">{study.title}</h4>
                  <p class="text-sm text-primary font-bold">{study.institution}</p>
                </div>
              </div>
              
              <p class="text-fg-muted mb-6 leading-relaxed text-sm">
                {study.description}
              </p>

              <!-- Progress Bar -->
              <div class="w-full h-2 bg-surface-lighter rounded-full overflow-hidden">
                <div 
                  class="h-full bg-primary relative overflow-hidden" 
                  style={`width: ${study.progress}%`}
                >
                    <div class="absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"></div>
                </div>
              </div>
              <div class="flex justify-between mt-2 text-xs font-bold text-fg-muted/60 uppercase tracking-wider">
                <span>In Progress</span>
                <span>{study.progress}%</span>
              </div>
            </div>
          ))}
        </div>
      </div>

    </div>

  </div>
</section>
